# AGENTS.md

本ファイルは、本プロジェクトにおいて  
**AIエージェントおよび人間開発者が必ず守る共通ルール**を定義する。

実装・修正・レビュー・コミット作成時は、
常に本ドキュメントを最上位ルールとして扱うこと。

---

## レビュー方針（Review guidelines）

- PRレビューコメントは必ず日本語で書く。
- 指摘タイトル・本文ともに日本語で記載する。

---

## 変更方針（Change policy）

- 明示的に指示された内容は必ず実装する。
- より良い設計・実装案がある場合は **必ず提案する**。
- 提案内容は、指示や承認がない限り **実装してはならない**。

※「より良さそう」「一般的にはこう」を理由に、
指示外の変更を黙って混ぜることを禁止する。

---

## 変更範囲の制御（Scope control）

- 指示に含まれていないファイルは原則変更しない。
- 指示内容を実現するために **必要な変更のみ例外として許可**する。
- 追加改善・リファクタリング案がある場合は、実装せず提案に留める。

---

## エラーハンドリング方針（Error handling）

- 指定された条件を満たせない場合、黙ってフォールバックしない。
- 代替挙動に切り替えるのではなく、**エラーで停止する**。
- 代替案がある場合は、実装せず提案として共有する。

---

## 品質ゲート（Quality gates）

- 実装・修正後は必ず以下のコマンドを実行する。
  - `npm run type-check`
  - `npm run prettier:check`
  - `npm run test`
- いずれかにエラーがある場合は修正する。
- すべて成功するまで作業完了としない。

---

## ドキュメントと実装の整合性（Docs & implementation consistency）

- 仕様・挙動・設定方法を変更した場合は、関連ドキュメントも同一PRで確認・更新する。
- 実装後は必ず、ドキュメントと実装に齟齬がないかを確認する。
- ドキュメント更新が必要か迷う場合は **更新が必要と判断する**。
- 対象例：
  - `README.md`
  - `docs/*.md`

### 齟齬が見つかった場合

- 実装が正しいか、ドキュメントが正しいかを独断で決めない。
- 最適と思われる対応案を提案する。
  - 実装に合わせてドキュメントを更新する案
  - ドキュメントに合わせて実装を修正する案
- 判断に迷う場合は、修正せず提案に留める。

---

## 判断方針（Decision making）

- 判断に迷う場合は独断で決めず、質問または提案を行う。
- 即時に質問できない場合は **現状維持**を選択する。

---

## 本ファイルの位置づけ（Positioning of this file）

- AGENTS.md は README / docs/\*.md と同等の **共有資産**である。
- `.gitignore` には含めない。
- 人間・AI の両方が参照し、同じ前提で作業することを目的とする。
